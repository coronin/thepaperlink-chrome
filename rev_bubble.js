var __tr_base="http://0.pl4.me/",__tr_api="G0oasfw0382Wd3oQ0l1LiWzE",__tr_doc=document;var __tr_el=__tr_doc.createElement("div");__tr_el.style.position="fixed";__tr_el.style.width="400px";__tr_el.style.marginLeft="-200px";__tr_el.style.top="50%";__tr_el.style.left="50%";__tr_el.style.padding="5px 5px 5px 5px";__tr_el.style.zIndex=1004;__tr_el.style.fontSize="20px";__tr_el.style.fontFace="Helvetica";__tr_el.style.color="#000000";__tr_el.style.border="2px solid #333333";__tr_el.style.textAlign="center";__tr_el.style.backgroundColor="#e0ecf1";__tr_el.innerHTML='"the Paper Link" js client is starting...';__tr_doc.body.appendChild(__tr_el);var agt=navigator.userAgent.toLowerCase(),ime_is_ie=(agt.indexOf("msie")!==-1&&__tr_doc.all);var styles='.thepaperlink_found {background:#f0de7d !important;background:dark !important;cursor:pointer;color:#000000 !important;display:-moz-inline-stack;display: inline-block;-moz-border-radius: 5px;-webkit-border-radius: 5px;-khtml-border-radius: 5px;border-radius: 5px;-moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);-webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);box-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);-ms-filter:"progid:DXImageTransform.Microsoft.Shadow(color=#000000,direction=135,strength=4)";filter:progid:DXImageTransform.Microsoft.Shadow(color=#000000,direction=135,strength=4);padding:1px 4px !important;margin:0 -4px !important; }.thepaperlink_two {text-align: justify;-moz-column-count: 2;-moz-column-gap: 1.5em;-moz-column-rule: 1px solid;-webkit-column-count: 2;-webkit-column-gap: 1.5em;-webkit-column-rule: 1px solid; }';if(ime_is_ie){__tr_doc.createStyleSheet().cssText=styles}else{var __tr_css=__tr_doc.createElement("style");__tr_css.setAttribute("type","text/css");__tr_css.appendChild(__tr_doc.createTextNode(styles));__tr_doc.body.appendChild(__tr_css)}var __tr_st=__tr_doc.createElement("script");__tr_st.setAttribute("type","text/javascript");__tr_st.setAttribute("src",__tr_base+"static/head.load.min.js");__tr_doc.body.appendChild(__tr_st);var currentTrns,currentId,currTitle,currAbs,currSummary,halfWin,search_term,absOn=0,foundOne=0;var regexp=/\bpmid\D+(\d+)\b/i,alldigi=/^\d+$/,pmc=/\b(pmc\d+)\b/i,doi=/(\d{2}\.\d{4}\/\S+[0-9a-zA-Z])/;var loadHeadAttempts=5;var loadingMsg=" loading...";var loadedMsg="tap highlighted ID to use";var notSupportedMsg="oops, this site is not supported";var notFoundMsg="oops, no ID found on this page";function finalMsg(a){__tr_el.innerHTML=a;window.setTimeout(function(){jQuery(__tr_el).fadeOut("slow",function(){jQuery(this).remove()})},3000)}function eFetch(c,b){var a={apikey:"52b154eec8763fdad7a90cfc139e0719",db:"pubmed",id:c};jQuery.getJSON("http://4.pl4.me/efetch?callback=?",a,function(j){var f,i,g,e,h="<p>"+currTitle+"</p>";jQuery.each(j.result,function(k,d){if(d.MedlineCitation.Article.Abstract){h+='<p class="thepaperlink_two"><b><u>Abstract</u>: </b>'+d.MedlineCitation.Article.Abstract.AbstractText+"</p>"}if(d.MedlineCitation.CommentsCorrectionsList){f="<p><b><u>References</u>: </b>";for(g=0;g<d.MedlineCitation.CommentsCorrectionsList.length;g+=1){if(g===0){f+='<u style="cursor:pointer;" onclick="javascript:openFile(\'https://www.ncbi.nlm.nih.gov/pubmed/'+d.MedlineCitation.CommentsCorrectionsList[g].PMID+"/?tool=thepaperlinkClient')\">"+d.MedlineCitation.CommentsCorrectionsList[g].RefSource.replace(/([a-zA-Z]+). (\d{4})( [A-Z]|;).+/g,'$1 <font style="font-style:italic;">$2</font>')+"</u>"}else{f+='; <u style="cursor:pointer;" onclick="javascript:openFile(\'https://www.ncbi.nlm.nih.gov/pubmed/'+d.MedlineCitation.CommentsCorrectionsList[g].PMID+"/?tool=thepaperlinkClient')\">"+d.MedlineCitation.CommentsCorrectionsList[g].RefSource.replace(/([a-zA-Z()]+). (\d{4})( [A-Z]|;).+/g,'$1 <font style="font-style:italic;">$2</font>')+"</u>"}}f+="</p>";h+=f}if(d.MedlineCitation.Article.DataBankList){e=d.MedlineCitation.Article.DataBankList.length;g=d.MedlineCitation.Article.DataBankList[e-1];while(g&&g.DataBankName!=="PDB"&&e>0){e-=1;g=d.MedlineCitation.Article.DataBankList[e-1]}if(e>0){f="<p><b><u>PDB Files</u>: </b>";for(i=0;i<g.AccessionNumberList.length;i+=1){if(i===0){f+='<u style="cursor:pointer;" onclick="javascript:openFile(\'http://jolecule.appspot.com/pdb/'+g.AccessionNumberList[i]+"')\">"+g.AccessionNumberList[i]+"</u> "}else{f+='; <u style="cursor:pointer;" onclick="javascript:openFile(\'http://jolecule.appspot.com/pdb/'+g.AccessionNumberList[i]+"')\">"+g.AccessionNumberList[i]+"</u> "}}f+="</p>";h+=f}}h+=' <b style="cursor:pointer;" onclick="javascript:getAbs(\''+c+"')\">[PMID:"+d.MedlineCitation.PMID+"]</b>"});jQuery(currentTrns).qtip("api").updateContent(h,true);jQuery(currentTrns).qtip("api").updateWidth(halfWin);if(b&&currentId===c){currAbs=h}})}function format_esum(b){var a="";jQuery.each(b.result,function(f,g){a+="<p>";var d,e,c="";currTitle='<b style="cursor:pointer;" onclick="javascript:getAbs(\''+g.Id+"')\">"+g.Title+"</b>";for(e=0;e<g.AuthorList.length;e+=1){if(e===0){d=g.AuthorList[e];c='<u style="cursor:pointer;" onclick="javascript:eSS(\''+d+"')\">"+d+"</u>"}else{if(e===(g.AuthorList.length-1)){d=g.AuthorList[e];c+=', <u style="cursor:pointer;" onclick="javascript:eSS(\''+d+"')\">"+d+"</u>"}else{c+=", "+g.AuthorList[e]}}}a+=c+".<br/>"+currTitle+"<br/><i>"+g.Source+"</i>, "+g.PubDate+". <i>"+g.Volume+"</i>, "+g.Pages+"<br/>[PMID:"+g.Id+"]</p>"});return a}function eSummary(c,b){var a={apikey:"52b154eec8763fdad7a90cfc139e0719",db:"pubmed",id:c};jQuery.getJSON("http://4.pl4.me/esummary?callback=?",a,function(f){var e=format_esum(f);jQuery(currentTrns).qtip("api").updateContent(e,true);if(currentId===f.result[0].Id){currSummary=e}})}function eSS(b){var a={apikey:"52b154eec8763fdad7a90cfc139e0719",db:"pubmed",retmax:"5",term:b};jQuery.getJSON("http://4.pl4.me/esearch+esummary?callback=?",a,function(e){var c=format_esum(e);jQuery(currentTrns).qtip("api").updateContent(c,true);jQuery(currentTrns).qtip("api").updateWidth(halfWin);jQuery("#thepaperlink_titleLead").text(":back")})}function getAbs(a){if(absOn){jQuery(currentTrns).qtip("api").updateContent(currSummary,true);absOn=0;jQuery("#thepaperlink_titleLead").text(":more")}else{if(currAbs){jQuery(currentTrns).qtip("api").updateContent(currAbs,true);jQuery(currentTrns).qtip("api").updateWidth(halfWin)}else{jQuery(currentTrns).qtip("api").updateContent(currTitle+loadingMsg,true);eFetch(a,1)}absOn=1;jQuery("#thepaperlink_titleLead").text(":less")}return false}function getSum(a){if(currSummary&&currSummary.substr(currSummary.length-5,4)===a.substr(a.length-4)){jQuery(currentTrns).qtip("api").updateContent(currSummary,true)}else{jQuery(currentTrns).qtip("api").updateContent(loadingMsg,true);eSummary(a,1)}}function openFile(c){var b,d,e=((__tr_doc.body.clientWidth*90)/100),a=__tr_doc.body.clientHeight;if(ime_is_ie){d="External_Link"}else{d="External_Link_"+Math.random()}b=window.open(c,d,"status=0,toolbar=0,location=0,menubar=0,directories=0,resizable=1,width="+e+",height="+a+",left=50,top=50");b.focus();return false}function showTranslation(d){jQuery(d).qtip({content:{text:loadingMsg,title:{text:'access "the Paper Link" ',button:'<input type="image" height="20" width="20" src="'+__tr_base+'static/32stop.png" border="0" alt="close" style="cursor:pointer;" onclick="return false;" />'}},position:{corner:{target:"topMiddle",tooltip:"bottomMiddle"},adjust:{screen:true}},show:{when:false,solo:true},hide:false,style:{fontSize:"13px",title:{fontSize:"13px"},border:{radius:5},tip:true,textAlign:"left",direction:"ltr",name:"dark",width:{min:300}}});jQuery(d).qtip("show");try{var a=jQuery(d).text();if(regexp.test(a)){currentId=regexp.exec(a)[1]}else{if(alldigi.test(a)){currentId=a}else{if(currentId.substr(0,2)==="@@"&&currentId.length>2){currentId=currentId.substr(2)}else{jQuery(d).qtip("api").updateContent("failed to extract in the selection",true);return false}}}if(!currSummary||currentId.substr(currentId.length-4)!==currSummary.substr(currSummary.length-9,4)){currTitle="";currSummary="";currAbs=""}currentTrns=d}catch(c){jQuery(d).qtip("api").updateContent("error to extract in the selection",true);return false}try{jQuery.getJSON(__tr_base+"api?callback=?",{apikey:__tr_api,pmid:currentId,a:"js",w:search_term},function(e){var f='<span id="thepaperlink_titleLead" style="cursor:pointer;" onclick="javascript:getAbs(\''+currentId+"')\">:more</span>&nbsp;&ndash;";if(e.item[0].slfo!==""&&e.item[0].slfo!=="~"&&parseFloat(e.item[0].slfo)>0){f+=" if:<i>"+e.item[0].slfo+"</i>&nbsp;"}if(e.item[0].pmcid!==""){f+=' <u style="cursor:pointer;" onclick="javascript:openFile(\'https://www.ncbi.nlm.nih.gov/pmc/articles/'+e.item[0].pmcid+"/pdf/')\">Free</u>&nbsp;"}if(e.item[0].pdf!==""){f+=' <u style="cursor:pointer;" onclick="javascript:openFile(\''+e.item[0].pdf+"')\">PDF</u>&nbsp;"}if(e.item[0].f_v!==""){f+=' <u style="cursor:pointer;" onclick="openFile(\'http://f1000.com/'+e.item[0].fid+"')\">F1000: "+e.item[0].f_v+"</u>&nbsp;"}jQuery(d).qtip("api").updateTitle(f);getSum(currentId)});return false}catch(b){jQuery(d).qtip("api").updateContent("error to fetch the remote data",true);return false}}function eSearch(b,c,d){var a={apikey:"52b154eec8763fdad7a90cfc139e0719",db:"pubmed",retmax:"2",term:b};jQuery.getJSON("http://4.pl4.me/esearch?callback=?",a,function(e){if(e.result.IdList.length===1){currentId="@@"+e.result.IdList[0]}else{currentId="@@"}if(c){showTranslation(d)}})}function convertId(b){var a=jQuery(b).text();if(doi.test(a)){eSearch(doi.exec(a)[1],1,b)}else{if(pmc.test(a)){eSearch(pmc.exec(a)[1],1,b)}}}function embolden(c){var b,a;if(regexp.test(c)){b=c.indexOf(regexp.exec(c)[1]);a=regexp.exec(c)[1].length;foundOne=1;return'<span class="thepaperlink_trns">'+c.substr(0,b)+'<span class="thepaperlink_found">'+c.substr(b,a)+"</span>"+c.substr(b+a)+"</span>"}else{if(alldigi.test(c)&&c.length>4){foundOne=1;return'<span class="thepaperlink_trns"><span class="thepaperlink_found">'+c+"</span></span>"}else{if(pmc.test(c)){b=c.indexOf(pmc.exec(c)[1]);a=pmc.exec(c)[1].length;foundOne=1;return'<span class="thepaperlink_trnsz">'+c.substr(0,b)+'<span class="thepaperlink_found">'+c.substr(b,a)+"</span>"+c.substr(b+a)+"</span>"}else{if(doi.test(c)){b=c.indexOf(doi.exec(c)[1]);a=doi.exec(c)[1].length;foundOne=1;return'<span class="thepaperlink_trnsz">'+c.substr(0,b)+'<span class="thepaperlink_found">'+c.substr(b,a)+"</span>"+c.substr(b+a)+"</span>"}else{return c}}}}}function __tr_refresh(){halfWin=jQuery(window).width()*0.618;search_term=jQuery(".print_term").text();if(search_term&&__tr_doc.URL.substr(0,34)==="http://www.ncbi.nlm.nih.gov/pubmed"){search_term=search_term.substr(8,search_term.length)}else{search_term=""}(function(b){b.fn.replaceText=function(d,e,f){return this.each(function(){var h=this.firstChild,c,i,j=[];if(h){do{if(h.nodeType===3){c=h.nodeValue;i=c.replace(d,e);if(i!==c){if(!f&&/</.test(i)){b(h).before(i);j.push(h)}else{h.nodeValue=i}}}}while(h=h.nextSibling)}j.length&&b(j).remove()})}})(jQuery);var a="p, h1, h2, h3, h4, h5, h6, li, span, div, blockquote, small, i, u, b, strong, em, dd, a";jQuery(a).replaceText(/[^\?\!\"\,\n\r]+/g,embolden);jQuery(".thepaperlink_found").each(function(){jQuery(this).parent().attr("onclick","").click(function(b){if(ime_is_ie){b.returnValue=false}else{b.preventDefault()}return false})});jQuery(".thepaperlink_trns").click(function(){showTranslation(this)});jQuery(".thepaperlink_trnsz").click(function(){convertId(this)});if(foundOne){finalMsg(loadedMsg)}else{finalMsg(notFoundMsg)}}function __tr_jqueryWrapper(){try{jQuery("body").append('<div id="__tr_display"></div>');__tr_refresh()}catch(a){finalMsg(notSupportedMsg)}}function __startmeup(){if(typeof head==="undefined"){setTimeout(__startmeup,500);return}try{var a="1.4.2 1.4.3 1.4.4 1.5.0 1.5.1 1.5.2";if(typeof jQuery!=="undefined"&&a.indexOf(jQuery.fn.jquery)>=0){head.js(__tr_base+"static/jquery.qtip-1.0.0-rc3.min.js",__tr_jqueryWrapper)}else{head.js("https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js",__tr_base+"static/jquery.qtip-1.0.0-rc3.min.js",__tr_jqueryWrapper)}}catch(b){if(loadHeadAttempts--===0){finalMsg(notSupportedMsg)}else{setTimeout(__startmeup,500)}}}__startmeup();
